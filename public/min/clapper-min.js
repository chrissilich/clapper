!function(){cookies.nulltoremove=!0;var o=$(".stripes"),e=$(".stripes > div").first(),n=$(".flash"),a=$("input[name='production']").val(cookies("production")?cookies("production"):""),i=$("input[name='director']").val(cookies("director")?cookies("director"):""),t=$("input[name='camera']").val(cookies("camera")?cookies("camera"):"A"),m=$("input[name='scene']").val(cookies("scene")?cookies("scene"):"1"),c=$("input[name='take']").val(cookies("take")?cookies("take"):"1"),r=$("input[name='time']"),s=$("input[name='date']"),l=$("input[name='room']").val(cookies("room")?cookies("room"):""),u=$("input.syncable"),v=$("input.cookieable"),k=io();s.val(moment().format("YYYY-MM-DD"));var p=function(){r.val(moment().format("HH:MM:SS.SSS")),requestAnimationFrame(p)};requestAnimationFrame(p);var w=function(){cookies("room")&&cookies("room")!=l.val()&&(k.emit("leave-room",cookies("room")),console.log("left room",cookies("room"))),cookies({room:l.val()}),l.val().length&&(k.emit("join-room",l.val()),console.log("joined room",l.val()))};l.on("keyup",w),w();var d=function(){var o=$(this).attr("name"),e=$(this).val();console.log("sync",o,e),k.emit("sync",{name:o,val:e,room:cookies("room"),id:k.id})};u.on("keyup",d);var f=function(){var o=$(this).attr("name"),e=$(this).val(),n={};n[o]=e,console.log("save cookie",n),cookies(n)};v.on("keyup",f),k.on("sync-down",function(o){o.id!=k.id&&(console.log(o,$("input.syncable[name='"+o.name+"']"),o.val),$("input.syncable[name='"+o.name+"']").val(o.val))});var A=new Howl({src:["assets/audio/clap.mp3"],onplay:function(){console.log("clap sound play"),TweenMax.fromTo(e,1,{rotation:-45},{rotation:0,ease:Linear.easeNone,onComplete:function(){TweenMax.fromTo(n,1,{autoAlpha:1},{autoAlpha:0,ease:Linear.easeNone})}})}});o.on("click",function(){A.play()})}(),function(){for(var o=0,e=["webkit","moz"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var a=(new Date).getTime(),i=Math.max(0,16-(a-o)),t=window.setTimeout(function(){e(a+i)},i);return o=a+i,t}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(o){clearTimeout(o)})}();
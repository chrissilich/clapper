var express=require("express"),app=express(),path=require("path"),http=require("http").Server(app),io=require("socket.io")(http);app.use(express.static(path.join(__dirname,"public"))),http.listen(3e3,function(){console.log("listening on *:3000")}),io.on("connection",function(o){console.log("a user connected"),o.on("join-room",function(n){console.log("a user joined",n),o.join(n)}),o.on("leave-room",function(n){console.log("a user left",n),o.leave(n)}),o.on("sync",function(o){console.log("sync",o),io.to(o.room).emit("sync-down",o)}),o.on("clap",function(o){console.log("clap",o),io.to(o.room).emit("clap-down",o)}),o.on("disconnect",function(){console.log("a user disconnected")})});